<!DOCTYPE html>
<html lang="nl">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <meta name="description" content="Een glimlach is het mooiste dat je kunt dragen. Wat heeft jou vandaag doen glimlachen?">
    <meta name="author" content="ProjectSmile.nl by Sander de Groot">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">

    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <meta property="og:title" content="{{ message }}"/>
    <meta property="og:image" content="https://projectsmile.nl/assets/img/logo-black.png"/>
    <meta property="og:site_name" content="Project Smile"/>
    <meta property="og:description" content="Heb je dit kaartje gehad? Zet 'm op de kaart"/>

    <title>Project Smile - Wat heeft jou vandaag doen glimlachen?</title>

    <!-- Custom CSS -->
    <link href="/assets/css/register.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="/assets/js/general.js"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.teal-orange.min.css">
    <script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>


    <script>

        function uploadSelfie()
        {
            var dataimg = new FormData();
            dataimg.append('selfie', document.getElementById('selfieInput').files[0], 'selfie');

            var oReq = new XMLHttpRequest();
            oReq.open("POST", "/submit", true);
            oReq.onload = function(oEvent) {
                if (oReq.status == 200) {
                    var contentType = oReq.getResponseHeader('Content-Type');
                    var image = oReq.responseText;

                    var imageElem = document.getElementById('selfiePicture');
                    imageElem.src = 'data:'+contentType+';base64,'+image;
                    imageElem.style.display = 'block';
                } else {
//                    oOutput.innerHTML = "Error " + oReq.status + " occurred when trying to upload your file.<br \/>";
                }
            };

            oReq.send(dataimg);
            return false;
        }

        function initGoogleMaps() {
            var input = document.getElementById('location');
            var searchBox = new google.maps.places.SearchBox(input, {
//                bounds: new google.maps.LatLngBounds(
//                        new google.maps.LatLng(-33.8902, 151.1759),
//                        new google.maps.LatLng(-33.8474, 151.2631))
            });

            // fix the placeholder from the location label as this messes with material design
            window.setTimeout(function() {
                input.removeAttribute('placeholder');
                input.parentNode.classList.remove('has-placeholder');
                input.parentNode.querySelector('label').style.visibility = 'visible';
            }, 1000);

        }
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDjL6cvWIfMIFOkvpJtEKjsZFRe6oCXwN4&callback=initGoogleMaps"></script>
</head>

<body>


<div class="register">

    <form id="registrationForm" enctype="multipart/form-data">

        <header>
            <img src="/assets/img/logo-without-border.png" class="logo without border"/>
        </header>


        <section class="page first_page">
            <p>Leuk! Je hebt een kaartje van iemand gekregen.</p>
            <p>Laat ons weten even weten waar en wij zetten het op de kaart!</p>

            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="name" name="name">
                <label class="mdl-textfield__label" for="name">Wat is je voornaam?</label>
            </div>

            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="location" name="location">
                <label class="mdl-textfield__label" for="location" style="visibility: hidden;">Waar kreeg je dit kaartje?</label>
            </div>

            <footer>
                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button-accent">
                    Ga verder
                </button>
            </footer>
        </section>

        <section class="page selfie active">
            <p>Maak een selfie met jouw kaartje!</p>

            <div class="selfie" onclick="document.getElementById('selfieInput').click()">
                <i class="material-icons camera">camera_enhance</i>
                <img style="display:none;" id="selfiePicture" />
            </div>

            <input type="file" accept="image/*;capture=camera" style="display: none;" name="selfie" id="selfieInput" />

            <a class="skip">Overslaan</a>

            <footer>
                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button-accent" onclick="return uploadSelfie()">
                    Ga verder
                </button>
            </footer>

        </section>



    </form>

</div>

</body>
</html>
